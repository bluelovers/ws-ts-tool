"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("typescript"),i=require("cross-spawn-extra"),t=require("path"),r=require("get-current-tsconfig"),o=require("debug-color2/logger"),s=require("@ts-type/tsconfig-to-program/src/index");function handleOptions(e,i){var o;let s=null==i?void 0:i.cwd;Array.isArray(e)||(e=[e]),s||(s=t.dirname(e[0]));const n=null!==(o=null==i?void 0:i.compilerOptions)&&void 0!==o?o:r.getCurrentTsconfig({...null==i?void 0:i.getCurrentTsconfigOptions,cwd:s}).compilerOptions;return{files:e,cwd:s,bin:(null==i?void 0:i.bin)||"tsc",compilerOptions:n}}function emitTsFiles(i,n){var l,c;let a=null==n?void 0:n.cwd;Array.isArray(i)||(i=[i]),a||(a=t.dirname(t.resolve(process.cwd(),i[0]))),i=i.map((e=>t.resolve(a,e)));let d=null!==(l=null==n?void 0:n.getCurrentTsconfigOptions)&&void 0!==l?l:{},p=s.tsconfigToProgram(null!==(c=null==n?void 0:n.compilerOptions)&&void 0!==c?c:r.getCurrentTsconfig({...d,cwd:a}).compilerOptions);const u=e.createProgram(i,p),g=u.emit(),m=g.emitSkipped?1:0;let f=o.consoleLogger;return m&&(f=f.red),null!=n&&n.verbose&&(e.getPreEmitDiagnostics(u).concat(g.diagnostics).forEach((i=>{let t=e.flattenDiagnosticMessageText(i.messageText,"\n");if(i.file){const{line:e,character:r}=i.file.getLineAndCharacterOfPosition(i.start);t=`${i.file.fileName} (${e+1},${r+1}): ${t}`}f.info("[Diagnostic]",t)})),f.debug(`[CWD] ${a}`)),m&&f.error(`[Program] Process exiting with code '${m}'.`),{cwd:a,files:i,exitCode:m,emitResult:g,compilerOptions:p,program:u}}exports.default=emitTsFiles,exports.emitTsFiles=emitTsFiles,exports.handleOptions=handleOptions,exports.spawnEmitTsFiles=function spawnEmitTsFiles(e,t){let{cwd:r,compilerOptions:o,files:n,bin:l}=handleOptions(e,t),c=s.tsconfigToCliArgs(o);return i.sync(l,[...c,"--tsBuildInfoFile",".",n[0]],{cwd:r,stdio:"inherit"})};
//# sourceMappingURL=index.cjs.production.min.cjs.map
