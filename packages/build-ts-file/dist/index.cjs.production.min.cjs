"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("typescript"),i=require("cross-spawn-extra"),r=require("path"),o=require("get-current-tsconfig"),t=require("debug-color2/logger"),s=require("@ts-type/tsconfig-to-program"),n=require("@ts-type/program-all-diagnostics");function handleOptions(e,i){var t,s;null!==(t=i)&&void 0!==t||(i={});let n=i.cwd;Array.isArray(e)||(e=[e]),n||(n=r.dirname(r.resolve(process.cwd(),e[0])));let l=null!==(s=i.compilerOptions)&&void 0!==s?s:o.getCurrentTsconfig({...i.getCurrentTsconfigOptions,cwd:n}).compilerOptions;i.overwriteCompilerOptions&&(l={...l,...i.overwriteCompilerOptions});const p=i.bin||"tsc";return{...i,files:e,cwd:n,bin:p,compilerOptions:l}}function emitTsFiles(i,o){let{cwd:l,compilerOptions:p,files:c,logger:a,verbose:g,compilerHost:m}=handleOptions(i,o);c=c.map((e=>r.resolve(l,e)));const d=s.tsconfigToProgram(p);"function"==typeof m&&(m=m(d));const u=e.createProgram(c,d,m),f=u.emit(),O=f.emitSkipped?1:0;let w=null!=a?a:t.consoleLogger;if(O&&(w=w.red),g){const e=n.getAllDiagnostics(u,f);n.forEachDiagnostics(e,((e,i)=>{w.info("[Diagnostic]",i)})),w.debug(`[CWD] ${l}`)}return O&&w.error(`[Program] Process exiting with code '${O}'.`),{cwd:l,files:c,exitCode:O,emitResult:f,compilerOptions:p,programCompilerOptions:d,program:u,compilerHost:m}}exports.default=emitTsFiles,exports.emitTsFiles=emitTsFiles,exports.handleOptions=handleOptions,exports.spawnEmitTsFiles=function spawnEmitTsFiles(e,r){let{cwd:o,compilerOptions:t,files:n,bin:l}=handleOptions(e,r),p=s.tsconfigToCliArgs(t);return i.sync(l,[...p,"--tsBuildInfoFile",".",n[0]],{cwd:o,stdio:"inherit"})};
//# sourceMappingURL=index.cjs.production.min.cjs.map
