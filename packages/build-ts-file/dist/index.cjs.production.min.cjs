"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("typescript"),i=require("cross-spawn-extra"),t=require("path"),r=require("get-current-tsconfig"),o=require("debug-color2/logger"),s=require("@ts-type/tsconfig-to-program");function handleOptions(e,i){var o,s;null!==(o=i)&&void 0!==o||(i={});let n=i.cwd;Array.isArray(e)||(e=[e]),n||(n=t.dirname(t.resolve(process.cwd(),e[0])));let l=null!==(s=i.compilerOptions)&&void 0!==s?s:r.getCurrentTsconfig({...i.getCurrentTsconfigOptions,cwd:n}).compilerOptions;return i.overwriteCompilerOptions&&(l={...l,...i.overwriteCompilerOptions}),{files:e,cwd:n,bin:i.bin||"tsc",compilerOptions:l}}function emitTsFiles(i,r){var n;null!==(n=r)&&void 0!==n||(r={});let{cwd:l,compilerOptions:c,files:p}=handleOptions(i,r);p=p.map((e=>t.resolve(l,e)));const a=s.tsconfigToProgram(c);let{compilerHost:g}=r;"function"==typeof g&&(g=g(a));const m=e.createProgram(p,a,g),d=m.emit(),f=d.emitSkipped?1:0;let u=o.consoleLogger;return f&&(u=u.red),r.verbose&&(e.getPreEmitDiagnostics(m).concat(d.diagnostics).forEach((i=>{let t=e.flattenDiagnosticMessageText(i.messageText,"\n");if(i.file){const{line:e,character:r}=i.file.getLineAndCharacterOfPosition(i.start);t=`${i.file.fileName} (${e+1},${r+1}): ${t}`}u.info("[Diagnostic]",t)})),u.debug(`[CWD] ${l}`)),f&&u.error(`[Program] Process exiting with code '${f}'.`),{cwd:l,files:p,exitCode:f,emitResult:d,compilerOptions:c,programCompilerOptions:a,program:m,compilerHost:g}}exports.default=emitTsFiles,exports.emitTsFiles=emitTsFiles,exports.handleOptions=handleOptions,exports.spawnEmitTsFiles=function spawnEmitTsFiles(e,t){let{cwd:r,compilerOptions:o,files:n,bin:l}=handleOptions(e,t),c=s.tsconfigToCliArgs(o);return i.sync(l,[...c,"--tsBuildInfoFile",".",n[0]],{cwd:r,stdio:"inherit"})};
//# sourceMappingURL=index.cjs.production.min.cjs.map
